!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(4),a=n(9),i=r(a),u=n(10),s=r(u);i.default.alias="Example",s.default.alias="Demo",o.Core.add([i.default,s.default]).run("pyrite-app")},,function(e,t){e.exports="<h1>Demo ${this.props.name}</h1> <button py-click={this.click.bind(this)}>Change</button>"},function(e,t){e.exports="${this.templates.title(this)} ${this.props.children} Name: <input type=text py-input={this.change.bind(this)} value=${this.state.name} /> <button py-click={this.click.bind(this)}>Change</button> <div py-hide=${this.state.answer}> The answer for <span style=color:red>${this.state.name}</span> is <span>${this.state.answer}</span> </div> <demo ref=child name=Pepe click={this.childClick.bind(this)}> </demo>"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(n){"object"===("undefined"==typeof t?"undefined":i(t))&&(n.prototype.templates=t),n.prototype.template=function(){return e}}}function a(e){return function(t){t.prototype.parameters=function(){return e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.State=t.Template=t.Component=t.Core=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(5),s=r(u),c=n(6),l=r(c);t.Core=s.default,t.Component=l.default,t.Template=o,t.State=a,window.pyrite={Core:s.default,Component:l.default,Template:o,State:a}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.components={},this.componentNames=[],this.componentInstances={},this.events=["click","input","change"]}return r(e,[{key:"add",value:function(e){var t=this;if(Array.isArray(e))e.forEach(function(e){return t.add(e)});else{var n=e.alias||e.name;this.components[n]=e,this.componentNames.push(n.toUpperCase())}return this}},{key:"run",value:function(e){var t=this;window.addEventListener("DOMContentLoaded",function(n){var r=0,o=e?document.getElementById(e):document.body;Object.keys(t.components).forEach(function(e){var n=Array.from(o.querySelectorAll(e));n.forEach(function(n){try{n.setAttribute("py-id",r),t.componentInstances[r]=new t.components[e](n)}catch(e){console.error(e)}r++})})})}}]),e}();t.default=new o},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_dom=__webpack_require__(7),_dom2=_interopRequireDefault(_dom),_core=__webpack_require__(5),_core2=_interopRequireDefault(_core),_utils=__webpack_require__(8),_utils2=_interopRequireDefault(_utils),Component=function(){function Component(e){_classCallCheck(this,Component),this.props=this.__getProps(e),this.__templateString=this.template(),this.__setParameters(e),this.__setEvents(e),this.__setRefs(e)}return _createClass(Component,[{key:"parameters",value:function(){return{}}},{key:"template",value:function(){return""}},{key:"onLoad",value:function(){}},{key:"__setParameters",value:function(e){var t=this;this.__parametersHandler={set:function(r,o,a){r[o]=a,t.secureParam[o]=_utils2.default.htmlEntities(a);var i=Object.assign({},t.state);return _utils2.default.mergeDeep(r,t.secureParam),_dom2.default.changeDom(_core2.default.componentNames,n,e,t.__getTemplate.bind(t)),_utils2.default.mergeDeep(r,i),r[o]=a,!0}},this.state=new Proxy(this.state,this.__parametersHandler),this.secureParam={};var n=_dom2.default.loadDom(_core2.default.componentNames,e,this.__getTemplate.bind(this));n.components.forEach(function(t){return t.setAttribute("py-parent",e.getAttribute("py-id"))})}},{key:"__setEvents",value:function(e){var t=this;_core2.default.events.forEach(function(n){var r="py-"+n,o=Array.from(e.querySelectorAll("["+r+"]"));o.forEach(function(e){var o=e.getAttribute(r);if(_utils2.default.hasBrackets(o)){var a=o.substring(1,o.length-1),i=_utils2.default.expresion(a,t);e.addEventListener(n,i)}})})}},{key:"__getProps",value:function(e){var t=this,n=Array.from(e.attributes),r={},o=e.getAttribute("py-parent");return n.forEach(function(n){if(!_utils2.default.hasBrackets(n.value))return r[n.name]=n.value;var a=n.value.substring(1,n.value.length-1),i=o?_core2.default.componentInstances[o]:t;try{r[n.name]=_utils2.default.expresion(a,i)}catch(t){throw new TypeError(e.nodeName+" -> Attribute: "+n.name+" :: "+a)}}),r.children=e.innerHTML,this.state=Object.assign({},this.parameters(),r),r}},{key:"__setRefs",value:function(e){var t=this,n=Array.from(e.querySelectorAll("[ref]"));setTimeout(function(){t.refs={},n.forEach(function(e){var n=e.getAttribute("ref"),r=e.getAttribute("py-id");t.refs[n]=r?_core2.default.componentInstances[r]:e}),t.onLoad()})}},{key:"__getTemplate",value:function __getTemplate(){return eval("`"+this.__templateString+"`")}}]),Component}();exports.default=Component},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"getNodes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=Array.from(t.childNodes);i.forEach(function(t){t.childNodes.length?r.getNodes(e,t,n,o,a):e.includes(t.nodeName)?a.push(t):3===t.nodeType?o.push(t):1===t.nodeType&&n.push(t)});var u=e.includes(t.nodeName);return 3!==t.nodeType&&(u?a:n).push(t),{tags:n,texts:o,components:a}}},{key:"setHidden",value:function(e){var t=e.getAttribute("py-hide"),n="false"!==t&&Boolean(t);e.hidden=n}},{key:"loadDom",value:function(e,t,n){t.innerHTML=n();var r=this.getInnerElements(e,t);return r}},{key:"getInnerElements",value:function(e,t,n){var r=this.getNodes(e,t);return n&&r.tags.pop(),r.components.pop(),r}},{key:"changeTextNodes",value:function(e,t){t.forEach(function(t,n){var r=e[n];t.nodeValue!==r.nodeValue&&(r.nodeValue=t.nodeValue)})}},{key:"changeTagNodes",value:function(e,t){var n=this;t.forEach(function(t,r){var o=e[r];if(t.outerHTML!==o.outerHTML){var a=t.attributes;Array.from(a).forEach(function(e,t){var n=o.attributes[t];e.value!==n.value&&(n.value=e.value,o.value&&(o.value=e.value))})}n.setHidden(o)})}},{key:"changeDom",value:function(e,t,n,r){var o=r();if(n.innerHTML!==o){var a=document.createRange().createContextualFragment(o),i=this.getInnerElements(e,a,!0);this.changeTextNodes(t.texts,i.texts),this.changeTagNodes(t.tags,i.tags)}}}]),e}();t.default=new o},function(module,exports){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Utils=function(){function Utils(){_classCallCheck(this,Utils)}return _createClass(Utils,[{key:"htmlEntities",value:function(e){return""===e?" ":"string"!=typeof e?e:String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},{key:"mergeDeep",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();if(this.isObject(e)&&this.isObject(o))for(var a in o)this.isObject(o[a])?(e[a]||Object.assign(e,_defineProperty({},a,{})),this.mergeDeep(e[a],o[a])):Object.assign(e,_defineProperty({},a,o[a]));return this.mergeDeep.apply(this,[e].concat(n))}},{key:"isObject",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&!Array.isArray(e)}},{key:"hasBrackets",value:function(e){return"{"===e[0]&&"}"===e[e.length-1]}},{key:"expresion",value:function expresion(_expresion,scope){return function(){return eval(_expresion)}.call(scope)}}]),Utils}();exports.default=new Utils},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(4),p=n(3),d=r(p),h=(u=(0,f.Template)(d.default,{title:function(e){return"\n\t\t<h1>Esto es un titulo</h1>\n\t\t<span>Count "+e.state.counter+"</span>\n\t\t</br>\n\t"}}),s=(0,f.State)({counter:100}),u(c=s(c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"click",value:function(e){this.state.answer=!this.state.answer,this.state.counter++,this.props.click(this.state.name)}},{key:"childClick",value:function(e){this.state.name=e}},{key:"change",value:function(e){this.state.name=e.target.value}}]),t}(f.Component))||c)||c);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),f=n(2),p=r(f),d=(u=(0,l.Template)(p.default),u(s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"click",value:function(){this.props.click(this.props.name)}}]),t}(l.Component))||s);t.default=d}]);
//# sourceMappingURL=pyritejs.js.map